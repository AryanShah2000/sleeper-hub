<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Fantasy Agent</title>
<style>
  :root{
    --bg:#0b1020; --panel:#121a35; --muted:#6b7aa6; --text:#e8ecff; --accent:#5ee0ff; --accent2:#84ffb5; --warn:#ffd166;
    --border: rgba(255,255,255,0.12);
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b1020,#0a0f1f 60%);color:var(--text);font:15px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  header{padding:16px;border-bottom:1px solid var(--border);background:rgba(11,16,32,.9);backdrop-filter:saturate(180%) blur(6px)}
  h1{margin:0;font-size:20px;letter-spacing:.2px;display:flex;align-items:center;gap:10px}
  .logo-bot svg{width:24px;height:24px;vertical-align:middle;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35))}

  .layout{max-width:1280px;margin:16px auto;padding:0 16px;display:grid;grid-template-columns:360px 1fr;gap:16px}
  aside{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:12px;min-height:72vh;display:flex;flex-direction:column}
  .main{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px;display:flex;flex-direction:column}
  .hidden{display:none}

  .status{margin-bottom:10px;padding:8px 10px;border:1px solid var(--border);border-radius:10px;background:#0e1734;color:#bcd;font-size:13px}
  .status.ok{color:#9ff3c8;border-color:#2a5}
  .status.err{color:#ffd1d1;border-color:#a33;background:#2a0e14}
  .inputs{display:grid;grid-template-columns:1fr 130px;gap:8px}
  .inputs > div{min-width:0}
  label{display:block;margin:4px 0 4px;color:var(--muted);font-weight:600}
  input,select,button{background:#0e1630;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:9px 10px}
  input,select{width:100%}
  #username{font-size:16px}
  button{cursor:pointer;transition:.2s;white-space:nowrap}
  button:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25)}
  .row-2{display:grid;grid-template-columns:1fr 110px;gap:8px;margin-top:6px}
  .nav-head{font-size:12px;color:#8fa1ff99;margin:12px 0 6px}
  .league-list{display:flex;flex-direction:column;gap:6px;overflow:auto}
  .league-item, .summary-item{display:flex;gap:8px;align-items:center;padding:8px;border:1px solid var(--border);border-radius:10px;background:#0e1734;cursor:pointer}
  .league-item.active, .summary-item.active{outline:2px solid var(--accent)}
  .li-title{font-weight:600}
  .li-sub{font-size:12px;color:#8fa1ff99}

  .controls{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap}
  .controls .group{min-width:160px}

  .tabs{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .tab-btn{padding:9px 12px;border-radius:10px;border:1px solid var(--border);background:#0e1630}
  .tab-btn.active{outline:2px solid var(--accent);color:#000;background:linear-gradient(90deg,var(--accent),var(--accent2))}
  .sections > section{display:none;margin-top:12px}
  .sections > section.active{display:block}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}

  table{width:100%;border-collapse:separate;border-spacing:0;margin-top:10px;background:#0b122a;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  th,td{padding:10px;border-bottom:1px solid var(--border)}
  th{background:#10183a;text-align:left;color:#b8c6ff}
  tr:last-child td{border-bottom:none}
  th.sortable{cursor:pointer; user-select:none; position:relative}
  th.sortable .arrow{font-size:11px; margin-left:6px; opacity:.65}
  th.sorted-asc .arrow, th.sorted-desc .arrow{opacity:1; color:var(--accent)}

  .note{color:#8fa1ff88;font-size:13px;margin-top:8px}
  footer{color:#8fa1ff55;font-size:12px;margin:16px 0 8px}

  /* landing */
  .landing{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding:24px;
           background:linear-gradient(180deg,#0b1020,#0a0f1f 60%); z-index:9999;}
  .landing-card{display:flex; flex-direction:column; align-items:center; gap:18px; max-width:720px; text-align:center}
  .landing .bot svg{width:160px;height:160px;filter:drop-shadow(0 8px 24px rgba(0,0,0,.35))}
  .bubble{background:#0e1734; border:1px solid var(--border); border-radius:14px; padding:16px 18px; color:#c9d3ffcc}
  .bubble .hi{font-weight:800; color:#e8ecff; margin-bottom:6px}
  .landing .entry{display:flex; gap:8px; width:min(560px,90vw)}
  .landing input{flex:1}
  .muted-mini{font-size:12px; color:#8fa1ff99}
</style>
</head>
<body>
<header>
  <h1>
    <span class="logo-bot" aria-hidden="true">
      <!-- header robot -->
      <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
        <defs><linearGradient id="gh" x1="0" x2="1"><stop offset="0" stop-color="#5ee0ff"/><stop offset="1" stop-color="#84ffb5"/></linearGradient></defs>
        <circle cx="60" cy="14" r="6" fill="url(#gh)"/><rect x="58" y="20" width="4" height="8" rx="2" fill="#5ee0ff"/>
        <rect x="28" y="30" width="64" height="40" rx="10" fill="#0f1a3a" stroke="#2a3a72"/>
        <circle cx="46" cy="48" r="6" fill="#5ee0ff"/><circle cx="74" cy="48" r="6" fill="#5ee0ff"/>
        <rect x="44" y="60" width="32" height="3" rx="1.5" fill="#24346b"/>
        <rect x="34" y="74" width="52" height="28" rx="8" fill="#0f1a3a" stroke="#2a3a72"/>
      </svg>
    </span>
    My Fantasy Agent
  </h1>
</header>

<!-- Landing screen (visible first) -->
<div id="landing" class="landing">
  <div class="landing-card">
    <div class="bot" aria-hidden="true">
      <!-- big robot -->
      <svg viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img">
        <defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stop-color="#5ee0ff"/><stop offset="1" stop-color="#84ffb5"/></linearGradient></defs>
        <circle cx="60" cy="14" r="8" fill="url(#g)"/><rect x="58" y="24" width="4" height="10" rx="2" fill="#5ee0ff"/>
        <rect x="22" y="36" width="76" height="46" rx="12" fill="#0f1a3a" stroke="#2a3a72" stroke-width="2"/>
        <circle cx="44" cy="58" r="7" fill="#5ee0ff"/><circle cx="76" cy="58" r="7" fill="#5ee0ff"/>
        <rect x="42" y="72" width="36" height="4" rx="2" fill="#24346b"/>
        <rect x="32" y="86" width="56" height="26" rx="10" fill="#0f1a3a" stroke="#2a3a72" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="bubble">
      <div class="hi">Hi, Iâ€™m your personal fantasy football agent ðŸ¤–</div>
      <div>Enter your <b>Sleeper Username</b> below to see everything about your leagues. Letâ€™s get some Ws!</div>
    </div>
    <div class="entry">
      <input id="landingUsername" placeholder="Sleeper Username" />
      <button id="landingGo" disabled>Continue</button>
    </div>
    <div class="muted-mini">Weâ€™ll fetch your leagues once you continue.</div>
  </div>
</div>

<!-- Main app (hidden until landing completes) -->
<div id="appLayout" class="layout hidden">
  <aside>
    <div id="status" class="status">Enter your Sleeper username, choose a season (center), and click <b>View Leagues</b>.</div>

    <div class="inputs">
      <div>
        <label for="username">Sleeper Username</label>
        <input id="username" placeholder="" />
      </div>
      <div style="align-self:end; display:flex; gap:8px; justify-content:flex-end">
        <button id="viewLeaguesBtn" disabled>View Leagues</button>
      </div>
    </div>

    <div class="row-2">
      <input id="manualLeagueId" placeholder="League ID (optional)" />
      <button id="addLeagueBtn" disabled>Add</button>
    </div>

    <div class="nav-head">Overview</div>
    <div id="summaryItem" class="summary-item hidden">
      <div>
        <div class="li-title">User Summary</div>
        <div class="li-sub">Cross-league view</div>
      </div>
    </div>

    <div class="nav-head">Your Leagues</div>
    <div id="leagueList" class="league-list"></div>
  </aside>

  <div class="main">
    <div class="controls">
      <div class="group" style="min-width:260px"><div class="note" id="contextNote"></div></div>
      <div class="group hidden" id="seasonGroup">
        <label for="seasonMain">Season</label>
        <select id="seasonMain">
          <option value="2025" selected>2025</option>
          <option value="2024">2024</option>
        </select>
      </div>
      <div class="group hidden" id="weekGroup">
        <label for="weekSelect">Week</label>
        <select id="weekSelect"></select>
      </div>
    </div>

    <div id="userSummary" class="hidden">
      <div class="tabs" id="usTabs">
        <button class="tab-btn active" data-tab="us-root">Who to Root For</button>
        <button class="tab-btn" data-tab="us-proj">Projections</button>
        <button class="tab-btn" data-tab="us-byes">Bye Count</button>
      </div>
      <div class="sections">
        <section id="us-root" class="active"><div id="usRootTable"></div></section>
        <section id="us-proj"><div id="usProjTable"></div></section>
        <section id="us-byes"><div id="usByeTable"></div></section>
      </div>
    </div>

    <div id="leagueViews" class="hidden">
      <div class="tabs" id="leagueTabs">
        <button class="tab-btn active" data-tab="tab-roster">My Roster</button>
        <button class="tab-btn" data-tab="tab-pos">Team Projections</button>
        <button class="tab-btn" data-tab="tab-matchup">Opponent Projections</button>
        <button class="tab-btn" data-tab="tab-byes">Bye Week Matrix</button>
      </div>
      <div class="sections" id="leagueSections">
        <section id="tab-roster" class="active"><div id="rosterTable"></div></section>
        <section id="tab-pos"><div id="posTable"></div></section>
        <section id="tab-matchup">
          <div id="matchupSummary"></div>
          <div class="row" style="margin-top:8px">
            <div id="myStarters"></div>
            <div id="oppStarters"></div>
          </div>
        </section>
        <section id="tab-byes"><div id="byeMatrix"></div></section>
      </div>
    </div>

    <footer>Uses public Sleeper API + Rotowire projections via Sleeper. Data cached for ~3h in localStorage.</footer>
  </div>
</div>

<!-- Load JS from an external file -->
<script src="app.js" defer></script>
</body>
</html>
